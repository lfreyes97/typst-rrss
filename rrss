#!/usr/bin/env bash
# rrss — wrapper Typst-like para rrss.py
# Uso idéntico a typst:
#   rrss extract assets/img.jpg
#   rrss full --title "..." --quote "..."
#   rrss colors "#e94560"
#   rrss compile --all

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Asegurar que uv está disponible
if [[ -f "$HOME/.local/bin/env" ]]; then
  source "$HOME/.local/bin/env" 2>/dev/null
fi

if ! command -v uv &>/dev/null; then
  echo "Error: uv no está instalado. Instálalo con:"
  echo "  curl -LsSf https://astral.sh/uv/install.sh | sh"
  exit 1
fi

exec uv run --project "$SCRIPT_DIR" python "$SCRIPT_DIR/rrss.py" "$@"
